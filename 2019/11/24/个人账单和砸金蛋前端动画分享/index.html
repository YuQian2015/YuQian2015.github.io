<!DOCTYPE html><html><head><meta charset="utf-8"><title>个人账单和砸金蛋前端动画分享 | Moyufed</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="我们在前端开发过程中，有时候实现一些页面效果需要用到CSS3动画，比如活动页面、抽奖页面、个人账单等。我们可以照着设计师给的效果实现，但是我们追求的不止是这样，我们需要实现精致的动画，流畅的体验，还有新颖的交互。下面分享我在做个人账单、砸蛋抽奖过程中的心得。开发之前需要和产品与设计进行相关内容的确认为了提高效率、减少开发难度、避免重复劳动，我们需要提前做好准备：产品和设计并提出的需求也许和实现冲突"><meta name="keywords" content="前端,分享,nodejs"><meta property="og:type" content="article"><meta property="og:title" content="个人账单和砸金蛋前端动画分享"><meta property="og:url" content="http://blog.moyufed.com/2019/11/24/个人账单和砸金蛋前端动画分享/index.html"><meta property="og:site_name" content="Moyufed"><meta property="og:description" content="我们在前端开发过程中，有时候实现一些页面效果需要用到CSS3动画，比如活动页面、抽奖页面、个人账单等。我们可以照着设计师给的效果实现，但是我们追求的不止是这样，我们需要实现精致的动画，流畅的体验，还有新颖的交互。下面分享我在做个人账单、砸蛋抽奖过程中的心得。开发之前需要和产品与设计进行相关内容的确认为了提高效率、减少开发难度、避免重复劳动，我们需要提前做好准备：产品和设计并提出的需求也许和实现冲突"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-03-12T08:25:53.575Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="个人账单和砸金蛋前端动画分享"><meta name="twitter:description" content="我们在前端开发过程中，有时候实现一些页面效果需要用到CSS3动画，比如活动页面、抽奖页面、个人账单等。我们可以照着设计师给的效果实现，但是我们追求的不止是这样，我们需要实现精致的动画，流畅的体验，还有新颖的交互。下面分享我在做个人账单、砸蛋抽奖过程中的心得。开发之前需要和产品与设计进行相关内容的确认为了提高效率、减少开发难度、避免重复劳动，我们需要提前做好准备：产品和设计并提出的需求也许和实现冲突"><link rel="alternate" href="/atom.xml" title="Moyufed" type="application/atom+xml"><link rel="icon" href="/favicon.png"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">Moyufed</a></h1><h2 id="subtitle-wrap"><a href="/" id="subtitle">又摸到好大一条鱼，羡慕~！摸鱼前端分享交流，欢迎一起来摸鱼。</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.moyufed.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-个人账单和砸金蛋前端动画分享" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2019/11/24/个人账单和砸金蛋前端动画分享/" class="article-date"><time datetime="2019-11-24T07:31:33.000Z" itemprop="datePublished">2019-11-23</time></a></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">个人账单和砸金蛋前端动画分享</h1></header><div class="article-entry" itemprop="articleBody"><p>我们在前端开发过程中，有时候实现一些页面效果需要用到CSS3动画，比如活动页面、抽奖页面、个人账单等。我们可以照着设计师给的效果实现，但是我们追求的不止是这样，我们需要实现精致的动画，流畅的体验，还有新颖的交互。下面分享我在做个人账单、砸蛋抽奖过程中的心得。</p><h4 id="开发之前需要和产品与设计进行相关内容的确认"><a href="#开发之前需要和产品与设计进行相关内容的确认" class="headerlink" title="开发之前需要和产品与设计进行相关内容的确认"></a>开发之前需要和产品与设计进行相关内容的确认</h4><p>为了提高效率、减少开发难度、避免重复劳动，我们需要提前做好准备：</p><ul><li>产品和设计并提出的需求也许和实现冲突，作为开发人员需要与其确认可行的方案。</li></ul><ul><li>向设计确认设计规范、适配等，或者提出自己认为更好的效果，按照规范进行设计有利于效果和动画实现。</li><li>确认效果图是否符合规范，设计师切图是否有明确的标注，图片是否压缩。</li></ul><h4 id="Transitions-Transforms和Animation简介"><a href="#Transitions-Transforms和Animation简介" class="headerlink" title="Transitions, Transforms和Animation简介"></a>Transitions, Transforms和Animation简介</h4><p>CSS3动画相关的几个属性是：<code>transition</code>, <code>transform</code>, <code>animation</code> ，分别可以理解为过渡属性，变换属性，动画属性。</p><h5 id="Transiton"><a href="#Transiton" class="headerlink" title="Transiton"></a>Transiton</h5><p><code>transiton</code> 属性是一个简写属性，用于设置四个过渡属性：</p><ul><li><p><code>transition-property</code> 指定过渡的CSS属性值，比如 <code>transition-property:opacity</code> 就是只指定 <code>opacity</code> 属性参与这个过渡， 还可以使用 <code>all</code> 指定所有的属性值。</p></li><li><p><code>transition-duration</code> 指定过渡的持续时间</p></li><li><p><code>transition-delay</code> 延迟过渡时间</p></li><li><p><code>transition-timing-function</code> 指定过渡动画缓动类型，有<code>ease</code> | <code>linear</code> | <code>ease-in</code> | <code>ease-out</code> | <code>ease-in-out</code> | <code>cubic-bezier()</code>其中，<code>linear</code>线性过度，<code>ease-in</code>由慢到快，<code>ease-out</code>由快到慢，<code>ease-in-out</code>由慢到快在到慢。<br>我们通常使用简写 <em>transition: property duration timing-function delay;</em> ， 如：</p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.global-wrap</span> <span class="selector-class">.bg</span> &#123;<span class="attribute">transition</span>: all <span class="number">1s</span> .<span class="number">6s</span> ease-out;&#125;</span><br></pre></td></tr></table></figure><a id="more"></a><h5 id="Transform"><a href="#Transform" class="headerlink" title="Transform"></a>Transform</h5><p><code>transform</code> 指变换，实现元素的缩放，旋转，移动，斜切，分别对应 <code>scale()</code> <code>rotate()</code> <code>translate()</code> <code>skew()</code> 。需要注意的是，除了斜切，这些变换都可以使用3D的方式，比如移动变换还有以下的方式：</p><ul><li><code>translate3d(x,y,z)</code> 定义 3D 转换。</li><li><code>translateX(x)</code> 定义转换，只是用 X 轴的值。</li><li><code>translateY(y)</code> 定义转换，只是用 Y 轴的值。</li><li><code>translateZ(z)</code> 定义 3D 转换，只是用 Z 轴的值。</li></ul><p><code>transform</code> 的使用栗子：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.skew</span> &#123; <span class="attribute">transform</span>: skew(<span class="number">35deg</span>); &#125; <span class="comment">// 斜切</span></span><br><span class="line"><span class="selector-class">.planet0</span> &#123; <span class="attribute">transform</span>: scale(<span class="number">1.1</span>); &#125; <span class="comment">// 个人账单中用来对星球进行缩放</span></span><br><span class="line"><span class="selector-class">.sprite_text_2</span> &#123; <span class="attribute">transform</span>:rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">235deg</span>); &#125; <span class="comment">// 个人账单中对文字进行旋转</span></span><br><span class="line"><span class="selector-class">.lotto-waiting</span> &#123; <span class="attribute">left</span>: <span class="number">50%</span>; <span class="attribute">transform</span>: translate3d(-<span class="number">50%</span>,<span class="number">0</span>,<span class="number">0</span>); &#125; <span class="comment">// 砸蛋活动中使元素左右居中</span></span><br></pre></td></tr></table></figure><p>如果要定义变换的开始坐标可以使用 <code>transform-origin: x-axis y-axis z-axis;</code> ，对于x轴和y轴都可以使用 <code>left</code> <code>center</code> <code>right</code> 或者%`。</p><h5 id="Animation和keyframe"><a href="#Animation和keyframe" class="headerlink" title="Animation和keyframe"></a>Animation和keyframe</h5><p>个人账单和砸金蛋页面主要使用的就是 <code>animation</code> 和 <code>keyframe</code> 制作动画。</p><p>animation 属性也是是一个简写属性，用于设置以下动画属性：</p><ul><li><p><code>animation-name</code> 规定需要绑定到选择器的 <code>keyframe</code> 名称。</p></li><li><p><code>animation-duration</code> 规定完成动画所花费的时间，以秒或毫秒计。</p></li><li><p><code>animation-timing-function</code> 规定动画的速度曲线。</p></li><li><p><code>animation-delay</code> 规定在动画开始之前的延迟。</p></li><li><p><code>animation-iteration-count</code> 规定动画应该播放的次数。</p></li><li><p><code>animation-direction</code> 规定是否应该轮流反向播放动画。</p></li><li><p><code>animation-fill-mode</code> none | forwards | backwards | both 在播放之前或之后是否可见。</p><p><em>animation-duration 属性为 0时不会动画播。</em></p><p>我们通常使用简写： <em>animation: name duration timing-function delay iteration-count direction;</em> 。</p></li></ul><p>@keyframes 规则可以用来创建关键帧动画，每一个关键帧就是一个CSS样式，以百分比来定义关键帧，或者通过<code>from</code> 和 <code>to</code>，等价于 <code>0%</code> 和 <code>100%</code> ，分别对应开始和 结束。</p><p>语法： <em>@keyframes animationname {keyframes-selector {css-styles;}}</em></p><ul><li><em>animationname</em> 必需。动画的名称</li><li><em>keyframes-selector</em> 必需。定义关键帧节点的位置</li><li><em>css-styles</em> 必需。一个或多个合法的 CSS 样式属性。</li></ul><h5 id="两者的使用"><a href="#两者的使用" class="headerlink" title="两者的使用"></a>两者的使用</h5><p>栗子1：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.egg</span><span class="selector-class">.troll</span> &#123; <span class="comment">// 砸金蛋里面金蛋摇动的动画</span></span><br><span class="line">  -webkit-<span class="attribute">transform-origin</span>: bottom center; <span class="comment">// 让动画以底部中心为参考开始运动</span></span><br><span class="line">  -webkit-<span class="attribute">animation</span>: troll <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@-webkit-keyframes troll &#123; <span class="comment">// 让金蛋左右摇摆，使用旋转动画</span></span><br><span class="line">  0%&#123;-webkit-<span class="attribute">transform</span>:rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0deg</span>);&#125;</span><br><span class="line">  25%&#123;-webkit-<span class="attribute">transform</span>:rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,-<span class="number">2deg</span>);&#125;</span><br><span class="line">  75%&#123;-webkit-<span class="attribute">transform</span>:rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">2deg</span>);&#125;</span><br><span class="line">  100%&#123;-webkit-<span class="attribute">transform</span>:rotate3d(<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">0deg</span>);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>栗子2：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为了实现更好的砸蛋效果，页面使用了逐帧动画。</span></span><br><span class="line"><span class="comment">/* 首先定义了breakShine动画，动画中对使用的雪碧图背景位置进行变更。</span></span><br><span class="line"><span class="comment"> * 只关注背景图开始和结束的位置，并通过动画逐一显示中间位置来实现画面过渡</span></span><br><span class="line"><span class="comment"> * 在break-shine动画样式中使用了steps()， 表示两个帧之间变化完成需要的步数，这样一来，如果需要完成一个15帧的动画过渡，我们就总共需要14步 steps(14)，</span></span><br><span class="line"><span class="comment"> * 以下例子-webkit-animation 使用的forwards已经在前面介绍过，它是animation-fill-mode的一个模式，表示动画结束停留在最后一个帧， 这样就能够保留金蛋破裂之后的状态了。</span></span><br><span class="line"><span class="comment"> **/</span></span><br><span class="line"><span class="selector-class">.break-shine</span> &#123;</span><br><span class="line">  -webkit-<span class="attribute">animation</span>: breakShine <span class="number">1.8s</span> steps(<span class="number">14</span>) .<span class="number">2s</span> forwards; </span><br><span class="line">&#125;</span><br><span class="line">@-webkit-keyframes breakShine &#123;</span><br><span class="line">  0%&#123; <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">10</span>) fn-pxtorem(-<span class="number">921</span>);&#125;</span><br><span class="line">  100%&#123; <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">4210</span>) fn-pxtorem(-<span class="number">921</span>);&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>栗子3：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*流星动画*/</span></span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> meteor &#123;</span><br><span class="line">    0%&#123;<span class="attribute">opacity</span>:.<span class="number">0</span>;<span class="attribute">-webkit-transform</span>:<span class="built_in">translate3d</span>(0, 0, 0);&#125;</span><br><span class="line">    10%&#123;<span class="attribute">opacity</span>:.<span class="number">4</span>;&#125;</span><br><span class="line">    50%&#123;<span class="attribute">opacity</span>:.<span class="number">7</span>;<span class="attribute">-webkit-transform</span>:<span class="built_in">translate3d</span>(150%, -150%, 0);&#125;</span><br><span class="line">    90%&#123;<span class="attribute">opacity</span>:.<span class="number">4</span>;&#125;</span><br><span class="line">    100%&#123;<span class="attribute">opacity</span>:.<span class="number">0</span>;<span class="attribute">-webkit-transform</span>:<span class="built_in">translate3d</span>(300%, -300%, 0);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*为每一颗流星设置不同的持续时间，延迟时间，并且循环产生，这样在页面中就会有不间断的流星雨了*/</span></span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor1</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">1.8s</span> <span class="number">0s</span> linear both infinite;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor2</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">2s</span> .<span class="number">9s</span> linear both infinite;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor3</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">3.8s</span> .<span class="number">5s</span> linear both infinite;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor4</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">1.6s</span> .<span class="number">7s</span> linear both infinite;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor5</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">3.2s</span> <span class="number">0s</span> linear both infinite;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.meteor6</span> &#123;<span class="attribute">-webkit-animation</span>: meteor <span class="number">1.2s</span> <span class="number">0s</span> linear both infinite;&#125;</span><br></pre></td></tr></table></figure><h4 id="动画设计和实现思路"><a href="#动画设计和实现思路" class="headerlink" title="动画设计和实现思路"></a>动画设计和实现思路</h4><h5 id="动画分组"><a href="#动画分组" class="headerlink" title="动画分组"></a>动画分组</h5><p>为了方便控制动画，采用元素嵌套来限制动画，让同一类型的元素能产生较多的效果。如：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">把提示文字和砸蛋的破裂动画都放在金蛋元素内部，由金蛋状态控制是否显示</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite egg egg1"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">ng-class</span>=<span class="string">"&#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">               'troll':eggIndex == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'breaking':breaking == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'broken':breakIndex == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'active':activeIndex == 1&#125;"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite hint"</span>&gt;</span>里面没东西<span class="tag">&lt;<span class="name">br</span> /&gt;</span>真的不要砸<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite break-shine"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 用伪元素实现金蛋的阴影和敲金蛋的锤子，而敲金蛋的锤子只在金蛋被激活的状态下才显示，</span></span><br><span class="line"><span class="comment">// 这样一来通过控制金蛋状态，我们可以获得丰富的动画效果</span></span><br><span class="line">    <span class="comment">//阴影</span></span><br><span class="line">    <span class="selector-class">.egg</span>::after &#123;</span><br><span class="line">      <span class="attribute">background</span>: fn-bg-url(<span class="string">'lottery/'</span>,<span class="string">'egg_sprite@2x.png'</span>) no-repeat;</span><br><span class="line">      <span class="attribute">background-size</span>: fn-pxtorem(<span class="number">4520</span>) fn-pxtorem(<span class="number">1322</span>);</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">width</span>: fn-pxtorem(<span class="number">254</span>);</span><br><span class="line">      <span class="attribute">height</span>: fn-pxtorem(<span class="number">330</span>);</span><br><span class="line">      <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">1098</span>) fn-pxtorem(-<span class="number">262</span>);</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">z-index</span>: -<span class="number">1</span>;</span><br><span class="line">      <span class="attribute">bottom</span>: fn-pxtorem(-<span class="number">40</span>);</span><br><span class="line">      <span class="attribute">left</span>: fn-pxtorem(-<span class="number">50</span>);</span><br><span class="line">      <span class="attribute">pointer-events</span>: none;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//锤子</span></span><br><span class="line">    <span class="selector-class">.egg</span><span class="selector-class">.active</span>::before &#123;</span><br><span class="line">      <span class="attribute">background</span>: fn-bg-url(<span class="string">'lottery/'</span>,<span class="string">'egg_sprite@2x.png'</span>) no-repeat;</span><br><span class="line">      <span class="attribute">background-size</span>: fn-pxtorem(<span class="number">4520</span>) fn-pxtorem(<span class="number">1322</span>);</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">      <span class="attribute">display</span>: block;</span><br><span class="line">      <span class="attribute">width</span>: fn-pxtorem(<span class="number">130</span>);</span><br><span class="line">      <span class="attribute">height</span>: fn-pxtorem(<span class="number">130</span>);</span><br><span class="line">      <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">1530</span>) fn-pxtorem(-<span class="number">10</span>);</span><br><span class="line">      <span class="attribute">position</span>: absolute;</span><br><span class="line">      <span class="attribute">right</span>: fn-pxtorem(-<span class="number">90</span>);</span><br><span class="line">      <span class="attribute">top</span>: fn-pxtorem(-<span class="number">72</span>);</span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">      -webkit-<span class="attribute">transform-origin</span>: bottom right;</span><br><span class="line">      -webkit-<span class="attribute">animation</span>: hammer .<span class="number">5s</span> ease;</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">101</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h5 id="动画控制"><a href="#动画控制" class="headerlink" title="动画控制"></a>动画控制</h5><p>为了更好的展示数据，在动画设计方面由数据逻辑决定页面状态，页面的状态对应页面效果，动画负责串联各个效果。</p><ul><li><p>砸金蛋：</p><p>通过不同的数据状态，控制外层的结构样式，从而影响内部样式。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite egg egg1"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">ng-class</span>=<span class="string">"&#123;</span></span></span><br><span class="line"><span class="tag"><span class="string">               'troll':eggIndex == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'breaking':breaking == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'broken':breakIndex == 1,</span></span></span><br><span class="line"><span class="tag"><span class="string">               'active':activeIndex == 1&#125;"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite hint"</span>&gt;</span>里面没东西<span class="tag">&lt;<span class="name">br</span> /&gt;</span>真的不要砸<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"lotto-sprite break-shine"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>对应的CSS样式</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通常状态下的样式</span></span><br><span class="line"><span class="selector-class">.egg</span> &#123;</span><br><span class="line">     <span class="attribute">width</span>: fn-pxtorem(<span class="number">154</span>);</span><br><span class="line">     <span class="attribute">height</span>: fn-pxtorem(<span class="number">210</span>);</span><br><span class="line">     <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">770</span>) fn-pxtorem(-<span class="number">262</span>);</span><br><span class="line">     <span class="attribute">position</span>: absolute;</span><br><span class="line">     <span class="selector-class">.hint</span> &#123;</span><br><span class="line">       @<span class="keyword">include</span> mix-px2px(font-size, <span class="variable">$fs-smaller</span>);</span><br><span class="line">       <span class="attribute">color</span>: <span class="variable">$white</span>;</span><br><span class="line">       <span class="attribute">width</span>: fn-pxtorem(<span class="number">158</span>);</span><br><span class="line">       <span class="attribute">height</span>: fn-pxtorem(<span class="number">118</span>);</span><br><span class="line">       <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">1362</span>) fn-pxtorem(-<span class="number">262</span>);</span><br><span class="line">       <span class="attribute">position</span>: absolute;</span><br><span class="line">       <span class="attribute">top</span>: fn-pxtorem(-<span class="number">36</span>);</span><br><span class="line">       <span class="attribute">padding-top</span>: fn-pxtorem(<span class="number">30</span>);</span><br><span class="line">       <span class="attribute">text-align</span>: center;</span><br><span class="line">       <span class="attribute">line-height</span>: fn-pxtorem(<span class="number">24</span>);</span><br><span class="line">       <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="selector-class">.break-shine</span> &#123;</span><br><span class="line">       <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">10</span>) fn-pxtorem(-<span class="number">921</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在显示提示文字时，使用css动画显示出提示文字</span></span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.troll</span> <span class="selector-class">.hint</span> &#123;</span><br><span class="line">     -webkit-<span class="attribute">transform-origin</span>: bottom center;</span><br><span class="line">     -webkit-<span class="attribute">animation</span>: scale-bounce <span class="number">3.5s</span> .<span class="number">5s</span> ease;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">// 显示提示文字的同时，为了视觉效果，让金蛋本身也动起来</span></span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.troll</span> &#123;</span><br><span class="line">     -webkit-<span class="attribute">transform-origin</span>: bottom center;</span><br><span class="line">     -webkit-<span class="attribute">animation</span>: troll <span class="number">1s</span> ease;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">// 金蛋破坏时，显示破坏的动画了。</span></span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.broken</span> &#123;</span><br><span class="line">     <span class="attribute">width</span>: fn-pxtorem(<span class="number">154</span>);</span><br><span class="line">     <span class="attribute">height</span>: fn-pxtorem(<span class="number">210</span>);</span><br><span class="line">     <span class="attribute">background-position</span>: fn-pxtorem(-<span class="number">934</span>) fn-pxtorem(-<span class="number">262</span>);</span><br><span class="line">     <span class="attribute">position</span>: absolute;</span><br><span class="line">     <span class="selector-class">.break-shine</span> &#123;</span><br><span class="line">       <span class="attribute">width</span>: fn-pxtorem(<span class="number">300</span>);</span><br><span class="line">       <span class="attribute">height</span>: fn-pxtorem(<span class="number">400</span>);</span><br><span class="line">       <span class="attribute">position</span>: absolute;</span><br><span class="line">       <span class="attribute">left</span>: fn-pxtorem(-<span class="number">74</span>);</span><br><span class="line">       <span class="attribute">bottom</span>: fn-pxtorem(<span class="number">16</span>);</span><br><span class="line">       -webkit-<span class="attribute">animation</span>: breakShine <span class="number">1.8s</span> steps(<span class="number">14</span>) .<span class="number">2s</span> forwards;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.break</span> &#123;</span><br><span class="line">     -webkit-<span class="attribute">animation</span>: break .<span class="number">2s</span> steps(<span class="number">1</span>) forwards;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.breaking</span> &#123;</span><br><span class="line">     -webkit-<span class="attribute">animation</span>: breaking .<span class="number">3s</span> steps(<span class="number">1</span>) forwards;</span><br><span class="line">   &#125;</span><br><span class="line"><span class="comment">// 除了破坏的瞬间，都是不需要显示砸蛋锤的</span></span><br><span class="line">   <span class="selector-class">.egg</span><span class="selector-class">.broken</span>::after, <span class="selector-class">.egg</span><span class="selector-class">.breaking</span>::after, <span class="selector-class">.egg</span><span class="selector-class">.troll</span>::after &#123;</span><br><span class="line">     <span class="attribute">display</span>: none;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li><li><p>个人账单：</p><p>个人账单采用滑动显示每一页的统计结果的设计，首先针对每一页都有统一的结构，当滑动到对应页的时候，就会在这个结构的外层元素上添加 <code>play</code> 样式，再由这个样式控制内部动画。</p><p>以其中一个页面作为例子：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment"> 每一个页面都有一个item的样式，当滑动到这一页面时，就会给这个样式追加play样式，样式的变更可以产生过渡的动画，因此，我们要在play状态下实现想要的效果。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item-2"</span> <span class="attr">data-page</span>=<span class="string">"2"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--  mod_container 通过 transform 属性将它水平垂直居中，内部的元素都会以中心作为参考进行动画，为了层次更加清晰，我们还分出了text-stage 和 actor-stage两个部分，分别用来展示文字动画和配图动画</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mod_container center"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"text-stage"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text text_1 text_big title"</span>&gt;</span>你的努力，我们看得见<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text text_2"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text text_2"</span>&gt;</span>但还没获得学分呢<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"text text_2"</span>&gt;</span>还要继续加油啊！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"actor-stage"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"actor actor1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite_text_1 actor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite_text_2 actor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"actor actor2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite_text_3 actor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite_text_4 actor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite_text_5 actor"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>对应的样式：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们会对mod_container 进行居中处理</span></span><br><span class="line"><span class="selector-class">.mod_container</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: -<span class="number">36px</span>;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: translate3d(-<span class="number">50%</span>, -<span class="number">50%</span>, <span class="number">0</span>);</span><br><span class="line">  -webkit-<span class="attribute">backface-visibility</span>:hidden;<span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 然后统一为文字和配图添加动画，不同类型的文字和配图使用不同的延迟时间</span></span><br><span class="line"><span class="selector-class">.item</span> <span class="selector-class">.text</span>, <span class="selector-class">.item</span> <span class="selector-class">.actor</span> &#123;</span><br><span class="line">  <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">  -webkit-<span class="attribute">transform</span>: translate3d(<span class="number">0</span>, <span class="number">200px</span>, <span class="number">0</span>);<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.text</span>, <span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.actor</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>;-webkit-<span class="attribute">transform</span>: translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.text_1</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">1s</span> ease-out;<span class="attribute">white-space</span>: nowrap;&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.text_2</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">1s</span> .<span class="number">3s</span> ease-out;<span class="attribute">white-space</span>: nowrap;&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.text_3</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">1s</span> .<span class="number">8s</span> ease-out;&#125;</span><br><span class="line"><span class="selector-class">.item</span><span class="selector-class">.play</span> <span class="selector-class">.actor</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">1s</span> .<span class="number">6s</span> ease-out;&#125;</span><br><span class="line"><span class="comment">// 以上的样式已经使得元素在当前页时会产生过渡动画</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 而下面的样式则是针对每一页的元素设置变化的样式，在没有paly时只负责做布局，在play状态下则修改了需要变化的属性，以下示例主要针对 opacity 和 transform 进行了变化。</span></span><br><span class="line"><span class="selector-class">.item-2</span> <span class="selector-class">.sprite_text_1</span> &#123;<span class="attribute">position</span>: absolute;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">width</span>: <span class="number">56px</span>;<span class="attribute">height</span>: <span class="number">60px</span>;<span class="attribute">background-position</span>: -<span class="number">635px</span> -<span class="number">240px</span>;<span class="attribute">opacity</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> <span class="selector-class">.sprite_text_2</span> &#123;<span class="attribute">position</span>: absolute;<span class="attribute">right</span>: <span class="number">0</span>;<span class="attribute">top</span>: <span class="number">0</span>;<span class="attribute">width</span>: <span class="number">265px</span>;<span class="attribute">height</span>: <span class="number">244px</span>;<span class="attribute">background-position</span>: -<span class="number">562px</span> -<span class="number">300px</span>;<span class="attribute">opacity</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> <span class="selector-class">.sprite_text_3</span> &#123;<span class="attribute">position</span>: absolute;<span class="attribute">left</span>: <span class="number">0</span>;<span class="attribute">bottom</span>: <span class="number">0</span>;<span class="attribute">width</span>: <span class="number">56px</span>;<span class="attribute">height</span>: <span class="number">60px</span>;<span class="attribute">background-position</span>: -<span class="number">635px</span> -<span class="number">240px</span>;<span class="attribute">opacity</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> <span class="selector-class">.sprite_text_4</span> &#123;<span class="attribute">position</span>: absolute;<span class="attribute">right</span>: <span class="number">80px</span>; <span class="attribute">bottom</span>: -<span class="number">50px</span>;<span class="attribute">width</span>: <span class="number">56px</span>;<span class="attribute">height</span>: <span class="number">60px</span>;<span class="attribute">background-position</span>: -<span class="number">635px</span> -<span class="number">240px</span>;<span class="attribute">opacity</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span> <span class="selector-class">.sprite_text_5</span> &#123;<span class="attribute">position</span>: absolute;<span class="attribute">right</span>: <span class="number">150px</span>; <span class="attribute">bottom</span>: -<span class="number">90px</span>;<span class="attribute">width</span>: <span class="number">56px</span>;<span class="attribute">height</span>: <span class="number">60px</span>;<span class="attribute">background-position</span>: -<span class="number">635px</span> -<span class="number">240px</span>;<span class="attribute">opacity</span>: <span class="number">0</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span><span class="selector-class">.play</span> <span class="selector-class">.sprite_text_1</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span><span class="selector-class">.play</span> <span class="selector-class">.sprite_text_2</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span><span class="selector-class">.play</span> <span class="selector-class">.sprite_text_3</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>;&#125;</span><br><span class="line"><span class="selector-class">.item-2</span><span class="selector-class">.play</span> <span class="selector-class">.sprite_text_4</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>;<span class="attribute">transform</span>: rotate(<span class="number">45deg</span>);&#125;</span><br><span class="line"><span class="selector-class">.item-2</span><span class="selector-class">.play</span> <span class="selector-class">.sprite_text_5</span> &#123;<span class="attribute">opacity</span>: <span class="number">1</span>; <span class="attribute">transform</span>: scale(.<span class="number">5</span>) rotate(<span class="number">80deg</span>);&#125;</span><br></pre></td></tr></table></figure><p>另外需要提到的是背景动画，由于背景和内容是区分开来的，所以在设计动画时将背景独立出来，让它置于内容的下层，为了控制不同页有不同的背景，我们从滚动页获取到了当前页数，并为背景添加了对应的样式：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这是加载页的背景样式，可以看到背景的最外层元素添加了一个play0样式，我们通过修改这个样式，就可以实现背景的不同展示。 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap global-wrap play play0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">audio</span> <span class="attr">class</span>=<span class="string">"opacity"</span> <span class="attr">loop</span>=<span class="string">"loop"</span> <span class="attr">id</span>=<span class="string">"music"</span> <span class="attr">src</span>=<span class="string">"https://res.exexm.com/bill/common/bill_bg_music.mp3"</span>&gt;</span><span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bg bg2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bg bg3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite star star1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite star star2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite star star3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite star star4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite planet planet1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite planet planet2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite planet planet3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite planet planet4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite planet planet0"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sprite meteor meteor6"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 我们会预先写好每一页的背景页样式，然后通过transition实现背景元素的移动。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*背景动画*/</span></span><br><span class="line"><span class="selector-class">.global-wrap</span> <span class="selector-class">.sprite</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">2s</span> ease;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span> <span class="selector-class">.bg</span> &#123;-webkit-<span class="attribute">transition</span>: all <span class="number">1s</span> .<span class="number">6s</span> ease-out;&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play0</span> <span class="selector-class">.planet1</span> &#123;<span class="attribute">bottom</span>:<span class="number">800px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play0</span> <span class="selector-class">.planet0</span> &#123;<span class="attribute">bottom</span>: <span class="number">1200px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play0</span> <span class="selector-class">.planet2</span> &#123;<span class="attribute">bottom</span>: <span class="number">800px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play0</span> <span class="selector-class">.planet3</span> &#123;<span class="attribute">bottom</span>: -<span class="number">200px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play0</span> <span class="selector-class">.planet4</span> &#123;<span class="attribute">bottom</span>: -<span class="number">300px</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play2</span> <span class="selector-class">.planet0</span> &#123;<span class="attribute">bottom</span>: -<span class="number">400px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play2</span> <span class="selector-class">.planet1</span> &#123;<span class="attribute">bottom</span>: <span class="number">800px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play2</span> <span class="selector-class">.planet2</span> &#123;<span class="attribute">bottom</span>: <span class="number">650px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play2</span> <span class="selector-class">.planet3</span> &#123;<span class="attribute">bottom</span>: <span class="number">300px</span>;&#125;</span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play2</span> <span class="selector-class">.planet4</span> &#123;<span class="attribute">bottom</span>: <span class="number">50px</span>;&#125;</span><br><span class="line"></span><br><span class="line">……</span><br></pre></td></tr></table></figure><p>​</p><p>​</p></li></ul><h5 id="一些技巧"><a href="#一些技巧" class="headerlink" title="一些技巧"></a>一些技巧</h5><ul><li>通过缩放和位置变换使背景元素产生滚动视差。</li><li><p>同一个动画如果设置的持续时间不一样，可以产生不同的效果：</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这个动画只是对元素位置进行了微小的变换</span></span><br><span class="line">@-webkit-keyframes float &#123;</span><br><span class="line">    0%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);&#125;</span><br><span class="line">    20%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(-<span class="number">2%</span>, -<span class="number">2%</span>, <span class="number">0</span>);&#125;</span><br><span class="line">    40%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(<span class="number">1%</span>, <span class="number">1%</span>, <span class="number">0</span>);&#125;</span><br><span class="line">    60%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(-<span class="number">1%</span>, .<span class="number">5%</span>, <span class="number">0</span>);&#125;</span><br><span class="line">    80%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(<span class="number">1%</span>, -<span class="number">2%</span>, <span class="number">0</span>);&#125;</span><br><span class="line">    100%&#123;<span class="attribute">opacity</span>:<span class="number">1</span>;-webkit-<span class="attribute">transform</span>:translate3d(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置了30秒的时长，循环动画，用来体现星球漂浮的状态。</span></span><br><span class="line"><span class="selector-class">.global-wrap</span><span class="selector-class">.play</span> <span class="selector-class">.planet0</span> &#123;-webkit-<span class="attribute">animation</span>: float <span class="number">30s</span> <span class="number">0s</span> linear both infinite;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 把时间改为了0.2秒，用来体现火箭发射时的震动。</span></span><br><span class="line"><span class="selector-class">.item-0</span><span class="selector-class">.launch</span> <span class="selector-class">.actor2</span> &#123;-webkit-<span class="attribute">animation</span>: float .<span class="number">2s</span> <span class="number">0s</span> linear both infinite;&#125;</span><br></pre></td></tr></table></figure></li><li><p>通过设置 <code>animation-timing-function</code> 来提升动画的质感，另外，动画时间不宜过长。</p></li><li>通过设置不同 <code>animation-delay</code> 动画延迟时间来达成连贯效果，相同的元素之间采取相同的动画时，设置不同的延迟和持续时间会让效果更自然。</li></ul><h4><a href="#" class="headerlink"></a></h4><h4 id="提高性能"><a href="#提高性能" class="headerlink" title="提高性能"></a>提高性能</h4><p>浏览器渲染页面时，会将解析到的DOM分为多个Layout，然后对每个Layout生成图像和位置，再讲这些图层作为纹理传到GPU，最后复合多个图层到屏幕上显示。</p><p>为了提高动画性能，我们能够从以下方面着手：</p><ul><li><p>不改变元素位置和尺寸等属性，这些属性会影响到Layout，触发浏览器的重布局。</p></li><li><p>创建Layout，设置 <code>opacity</code> 或者 3D透视变换 <code>perspective</code> <code>transform</code> 等CSS属性 。</p></li><li><p>减少使用能够触发里游览器重新绘制Layout的样式。</p></li><li><p>使用3D动画，让手机能够启动GPU加速，使动画更加流畅：</p><p>使用 <code>opacity</code> <code>translate</code> <code>rotate</code> <code>scale</code> 会使浏览器更加容易处理动画，相应的，采取<code>translate3d(x,y,z)</code> <code>translateZ(z)</code> 这样的形式来处理效果更佳。</p></li></ul><p>关于提升动画性能的介绍：<a href="https://www.html5rocks.com/en/tutorials/speed/high-performance-animations/" target="_blank" rel="noopener">high-performance-animations</a></p><p>加速浏览器渲染的介绍：<a href="https://www.html5rocks.com/zh/tutorials/speed/layers/" target="_blank" rel="noopener">Accelerated Rendering in Chrome</a></p></div><footer class="article-footer"><a data-url="http://blog.moyufed.com/2019/11/24/个人账单和砸金蛋前端动画分享/" data-id="ck8k1iwni0013z4vy9f6bkr5e" class="article-share-link">Share</a></footer></div><nav id="article-nav"><a href="/2019/12/17/使用Taro开发一个微信小程序一/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">使用Taro开发一个微信小程序一</div></a><a href="/2019/11/24/Taro技术选型与权衡/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">Taro技术选型与权衡</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nginx/">Nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OnsenUI/">OnsenUI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wcp/">Wcp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nodejs/">nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-intl/">react-intl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-redux/">react-redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redux/">redux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/Linux/" style="font-size:20px">Linux</a> <a href="/tags/Nginx/" style="font-size:10px">Nginx</a> <a href="/tags/OnsenUI/" style="font-size:10px">OnsenUI</a> <a href="/tags/React/" style="font-size:20px">React</a> <a href="/tags/Wcp/" style="font-size:10px">Wcp</a> <a href="/tags/Webpack/" style="font-size:10px">Webpack</a> <a href="/tags/mongodb/" style="font-size:20px">mongodb</a> <a href="/tags/nodejs/" style="font-size:10px">nodejs</a> <a href="/tags/react/" style="font-size:10px">react</a> <a href="/tags/react-intl/" style="font-size:10px">react-intl</a> <a href="/tags/react-redux/" style="font-size:10px">react-redux</a> <a href="/tags/redux/" style="font-size:10px">redux</a> <a href="/tags/前端/" style="font-size:10px">前端</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/2020/04/04/【前端开发日常-18】快速配置webpack开发环境/">【前端开发日常 - 18】快速配置webpack开发环境</a></li><li><a href="/2020/03/31/JavaScript的this关键字/">JavaScript的this关键字</a></li><li><a href="/2020/03/31/File-APIs（Blob-BlobURL-ArrayBuffer-FileReader）/">File APIs（Blob, BlobURL, ArrayBuffer, FileReader）</a></li><li><a href="/2019/12/17/使用Taro开发一个微信小程序一/">使用Taro开发一个微信小程序一</a></li><li><a href="/2019/11/24/个人账单和砸金蛋前端动画分享/">个人账单和砸金蛋前端动画分享</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 Moyufed<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br><a href="http://www.beian.miit.gov.cn" target="_blank">黔ICP备18007258号</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>
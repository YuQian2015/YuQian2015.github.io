<!DOCTYPE html><html><head><meta charset="utf-8"><title>了解 cookie 和 session | 摸鱼前端 | Moyufed</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu-site-verification" content="bWMteHRHG2"><meta name="description" content="为何需要 cookie 和 session？首先来了解 HTTP （HyperText Transfer Protocol 超文本传输协议） 的几个特性：HTTP 建立于客户端-服务端（client/server）模型之上，浏览器发送请求，Web服务器接收请求后向客户端发送响应信息HTTP 是无状态的（stateless）协议，每一次传输都是独立的，互不影响。HTTP 是一个应用层 (applic"><meta name="keywords" content="全栈"><meta property="og:type" content="article"><meta property="og:title" content="了解 cookie 和 session"><meta property="og:url" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/index.html"><meta property="og:site_name" content="摸鱼前端 | Moyufed"><meta property="og:description" content="为何需要 cookie 和 session？首先来了解 HTTP （HyperText Transfer Protocol 超文本传输协议） 的几个特性：HTTP 建立于客户端-服务端（client/server）模型之上，浏览器发送请求，Web服务器接收请求后向客户端发送响应信息HTTP 是无状态的（stateless）协议，每一次传输都是独立的，互不影响。HTTP 是一个应用层 (applic"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/img/0003.png"><meta property="og:image" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/img/cookie_and_session.jpg"><meta property="og:image" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/img/session_id_response.png"><meta property="og:image" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/img/session_data_redis.png"><meta property="og:updated_time" content="2020-10-20T06:51:23.763Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="了解 cookie 和 session"><meta name="twitter:description" content="为何需要 cookie 和 session？首先来了解 HTTP （HyperText Transfer Protocol 超文本传输协议） 的几个特性：HTTP 建立于客户端-服务端（client/server）模型之上，浏览器发送请求，Web服务器接收请求后向客户端发送响应信息HTTP 是无状态的（stateless）协议，每一次传输都是独立的，互不影响。HTTP 是一个应用层 (applic"><meta name="twitter:image" content="http://blog.moyufed.com/2020/10/08/了解cookie和session/img/0003.png"><link rel="alternate" href="/atom.xml" title="摸鱼前端 | Moyufed" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">摸鱼前端 | Moyufed</a></h1><h2 id="subtitle-wrap"><a href="/" id="subtitle">分享有趣好玩的前端技术，游戏研究猿，欢迎交流，一起来摸鱼。</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.moyufed.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-了解cookie和session" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2020/10/08/了解cookie和session/" class="article-date"><time datetime="2020-10-08T07:06:18.000Z" itemprop="datePublished">2020-10-07</time></a></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">了解 cookie 和 session</h1></header><div class="article-entry" itemprop="articleBody"><h3 id="为何需要-cookie-和-session？"><a href="#为何需要-cookie-和-session？" class="headerlink" title="为何需要 cookie 和 session？"></a>为何需要 cookie 和 session？</h3><p>首先来了解 HTTP （HyperText Transfer Protocol 超文本传输协议） 的几个特性：</p><ul><li><p>HTTP 建立于客户端-服务端（client/server）模型之上，浏览器发送请求，Web服务器接收请求后向客户端发送响应信息</p></li><li><p>HTTP 是无状态的（stateless）协议，每一次传输都是独立的，互不影响。</p></li><li><p>HTTP 是一个应用层 (application layer) 协议，在传输层（transfer layer）协议之上，使用（TCP）作为传输层协议。</p></li><li><p>客户端请求服务端使用不同的请求方式（包括：GET、POST、DELETE、PUT 等）。</p></li><li><p>HTTP 定义了服务端状态码返回给客户端（如：200、404、500）。</p></li><li><p>HTTP 支持设置头部 headers，（包括：Cache-Control、Content-type 等）。</p></li></ul><p>http请求报文：</p><p><img src="/2020/10/08/了解cookie和session/img/0003.png" alt="http_message"></p><p>HTTP 是无状态的，意味着每次页面加载、每次请求都是独立的事件，和前后的事件没有关联。客户端请求服务之后，服务端不能区分发起 HTTP 请求的用户以及用户在网站的状态等，Cookie 和 Session 使 HTTP 能够维持状态，让网站能够记住用户的一些信息。</p><h3 id="Cookie-amp-Session"><a href="#Cookie-amp-Session" class="headerlink" title="Cookie &amp; Session"></a>Cookie &amp; Session</h3><p>Cookie 通常是由 <strong>浏览器</strong> 保存在用户电脑的小文本文件，经过浏览器转换成包含用户网站上的信息的文本，在浏览器发送 HTTP 请求的时候会把这些信息加在请求头中发送给服务端，服务端再根据 Cookie 来判断不同用户的信息。</p><p>Session 是 <strong>服务端</strong> 存储的用来标识用户信息的数据，当用户访问网站时，服务器会为这个用户创建一个唯一的 session id，服务器会把这个id通过 cookie 的形式传给浏览器，浏览器接收 cookie 之后，请求就能携带这个 cookie 访问服务器，通过这个session id 服务端就能够对访问的用户进行辨别。</p><p><img src="/2020/10/08/了解cookie和session/img/cookie_and_session.jpg" alt="cookie_and_session"></p><p>举个栗子：</p><p>商店发的会员卡（cookie），它记录了用户的信息（identification），并且是由商店（服务器）发给用户（浏览器），每次用户去商店消费都会携带着会员卡，由于商店管理了自己发布的会员卡信息，可以通过用户会员卡ID（session id）找到该用户的信息。</p><h3 id="Session-cookies-和-Persistent-cookies"><a href="#Session-cookies-和-Persistent-cookies" class="headerlink" title="Session cookies 和 Persistent cookies"></a>Session cookies 和 Persistent cookies</h3><ul><li>会话 cookie（Session cookies）在浏览网页时被创建，通常放在活动内存，会话结束时（浏览器关闭）会被删除。</li><li>持久化 cookie（Persistent cookies）浏览网页是被创建，并且没有失效之前，始终存在于浏览器的 cookie 存储目录，在到达失效日期时会被删除。</li></ul><h3 id="Cookie-包含的内容"><a href="#Cookie-包含的内容" class="headerlink" title="Cookie 包含的内容"></a>Cookie 包含的内容</h3><p>通常 cookie 都会包含以下内容：</p><ul><li>Cookie 来源的服务器名称</li><li>Cookie 保存的时间</li><li>随机生成的唯一的数值</li></ul><p>Cookie 是一个很小的文本文件，通常会被命名为类似 <a href="mailto:abc@example.com.txt" target="_blank" rel="noopener">abc@example.com.txt</a> 的文件，如果打开这些文件，可以看到类似如下的内容:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">HMP1 1 example.com/ 0 4058205869</span><br><span class="line">384749284 403847430 3449083948 *</span><br></pre></td></tr></table></figure><p>Google Chrome 浏览器使用 SQLite 文件存储 cookie ，默认存储在：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&lt;your_username&gt;\AppData\Local\Google\Chrome\User Data\Default\</span><br></pre></td></tr></table></figure><p>并且 Cookie 的值被加密了，因此无法直接打开。</p><h3 id="Cookie-相关"><a href="#Cookie-相关" class="headerlink" title="Cookie 相关"></a>Cookie 相关</h3><ul><li>不设置 cookie 过期时间，cookie 会在会话结束后销毁</li><li>持久 cookie 无法改成会话 cookie，除非删除再重新创建 cookie</li><li>将 cookie 的 <code>domain</code> 选项设置为主域名，子域名可以携带该 cookie 的发送到服务器</li></ul><h3 id="如何使用-cookie？"><a href="#如何使用-cookie？" class="headerlink" title="如何使用 cookie？"></a>如何使用 cookie？</h3><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><p>服务器通过响应头 <code>Set-Cookie</code> 来告诉浏览器创建一个 cookie，<code>Set-Cookie</code> 的值一个字符串，其格式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: &lt;name&gt;=&lt;value&gt;[; expires=&lt;date&gt;][; domain=&lt;domain&gt;][; path=&lt;path&gt;][; secure][; httponly]</span><br></pre></td></tr></table></figure><p>上面的格式中，“[]” 内部都是可选值，他们分别有如下作用：</p><ul><li><code>&lt;name&gt;=&lt;value&gt;</code> - 储存的字符串，会被浏览器携带发送回服务器，通常是一个 <code>name=value</code> 格式的字符串</li><li><code>expires</code> - Cookie 的过期时间，不设置的话，创建的 cookie 在会话结束后销毁，格式为 <code>DD-Mon-YYYY HH:MM:SS GMT</code></li><li><code>domain</code> - Cookie 被设置的域，只有向该域发送 HTTP 请求时才会携带对应的 cookie</li><li><code>path</code> - Cookie 被设置的路径，之后向该路径发起请求才会携带对应的 cookie</li><li><code>secure</code> - 一个 boolean 标记 cookie 是否只能通过 HTTPS 请求发送至服务器。</li><li><code>httponly</code> - 告诉浏览器该 cookie 不能通过 JavaScript 访问，可以阻止跨站脚本攻击（XSS）窃用 cookie。</li></ul><p>可以返回多个 <code>Set-Cookie</code> 头来设置多个 cookie：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: name=moyufed; path=/; expires=Mon, 26 Jul 2021 11:10:02 GMT; domain=localhost</span><br><span class="line">Set-Cookie: name2=moyufed2; path=/; expires=Mon, 26 Jul 2021 11:10:02 GMT; domain=localhost</span><br></pre></td></tr></table></figure><h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><p>JavaScript 通过 <code>document.cookie</code> 进行 cookie 的操作，但是仅限于非 <code>httpOnly</code> 的情况：</p><p>获取 cookie：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie</span><br></pre></td></tr></table></figure><p>创建或修改 cookie：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.cookie=<span class="string">"name="</span>+username;</span><br></pre></td></tr></table></figure><p>在浏览器发送请求时，会将 cookie 添加到请求头中，如果有多个 cookie，将以分号和空格分隔，cookie 的格式如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cookie: name=moyufed; name2=moyufed2</span><br></pre></td></tr></table></figure><h3 id="在-koa-中使用-cookie"><a href="#在-koa-中使用-cookie" class="headerlink" title="在 koa 中使用 cookie"></a>在 koa 中使用 cookie</h3><p>Koa 已经提供了从通过上下文（<code>ctx</code>）直接读写入 cookie 的方法，分别为：</p><ul><li><code>ctx.cookies.get(name, [options])</code> - 通过上下文读取 cookie</li><li><code>ctx.cookies.set(name, value, [options])</code> - 通过上下文写入 cookie</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ctx.cookies.set(</span><br><span class="line">    <span class="string">'name'</span>, </span><br><span class="line">    <span class="string">'moyufed'</span>,</span><br><span class="line">    &#123;</span><br><span class="line">        domain: <span class="string">'localhost'</span>, <span class="comment">// 设置 cookie 的域</span></span><br><span class="line">        path: <span class="string">'/'</span>, <span class="comment">// 设置 cookie 的路径</span></span><br><span class="line">        maxAge: <span class="number">24</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// cookie 的有效时间 ms</span></span><br><span class="line">        expires: <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">'2020-10-10'</span>), <span class="comment">// cookie 的失效日期，如果设置了 maxAge，expires 将没有作用</span></span><br><span class="line">        httpOnly: <span class="literal">false</span>, <span class="comment">// 是否要设置 httpOnly</span></span><br><span class="line">        overwrite: <span class="literal">false</span> <span class="comment">// 是否要覆盖已有的 cookie 设置</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>上面的代码没有设置 httpOnly，通过 <code>document.cookie</code> 可以获取到 <code>&quot;name=moyufed&quot;</code>，在访问 <code>&#39;/&#39;</code> 路径时，可以看到请求头里面携带了设置的 cookie。事实上 koa2 使用了 npm 的 <a href="https://github.com/pillarjs/cookies" target="_blank" rel="noopener">cookies</a> 模块来读写 cookie，上面的配置都可以从 cookies 源码查看。</p><h3 id="如何使用-session？"><a href="#如何使用-session？" class="headerlink" title="如何使用 session？"></a>如何使用 session？</h3><p>Session 存储在服务端，不会在网络中进行传输，但服务器产生的 session id 会以 cookie 存在客户端。</p><p>用户通过浏览器访问 web 站点，服务器会产生一个唯一的 session id，通过 <code>Set-Cookie</code> 响应头将其发送到浏览器，之后浏览器发送的请求都会自动携带这个 cookie，服务器根据 cookie 获取到的 session id 来获得存储在服务端的用户的信息。</p><p>用户信息储存的方式可以是内存（Redis）或数据库。</p><h3 id="在-koa-中使用-session"><a href="#在-koa-中使用-session" class="headerlink" title="在 koa 中使用 session"></a>在 koa 中使用 session</h3><p>Koa2 没有提供直接设置 session 的操作，但也有很多用于操作 session 的中间件，这里将使用 <a href="https://www.npmjs.com/package/koa-session-minimal" target="_blank" rel="noopener">koa-session-minimal</a> 中间件来处理 session，并且还将使用 <a href="https://redis.io/" target="_blank" rel="noopener">redis</a> 作为储存介质。同样，也有 <a href="https://www.npmjs.com/package/koa-redis" target="_blank" rel="noopener">koa-redis</a> 来为 koa 的 session 中间件提供 redis 储存。</p><p>关于 redis 的安装可以查看 <a href="https://moyufed.com/2020/10/01/%E3%80%90%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E6%97%A5%E5%B8%B8-4%E3%80%91Windows%E5%AE%89%E8%A3%85Redis%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/" target="_blank" rel="noopener">【前端开发日常 - 4】Windows安装Redis及简单使用</a> 。</p><p>安装中间件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install koa-session-minimal koa-redis</span></span><br></pre></td></tr></table></figure><p>示例代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Koa = <span class="built_in">require</span>(<span class="string">'koa'</span>); <span class="comment">// 引入koa</span></span><br><span class="line"><span class="keyword">const</span> Router = <span class="built_in">require</span>(<span class="string">'koa-router'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> session = <span class="built_in">require</span>(<span class="string">'koa-session-minimal'</span>);</span><br><span class="line"><span class="keyword">const</span> redisStore = <span class="built_in">require</span>(<span class="string">'koa-redis'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = <span class="keyword">new</span> Koa(); <span class="comment">// 创建 koa 应用</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(); <span class="comment">// 使用 koa-router</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 存放 sessionId 的 cookie 配置，根据情况自己设定</span></span><br><span class="line"><span class="keyword">let</span> cookie = &#123;</span><br><span class="line">    maxAge: <span class="number">60</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="comment">// cookie 有效时长(ms)</span></span><br><span class="line">    expires: <span class="string">''</span>,  <span class="comment">// cookie 失效时间</span></span><br><span class="line">    path: <span class="string">''</span>, <span class="comment">// 写 cookie 所在的路径</span></span><br><span class="line">    domain: <span class="string">''</span>, <span class="comment">// 写 cookie 所在的域名</span></span><br><span class="line">    httpOnly: <span class="literal">true</span>, <span class="comment">// 是否只用于 http 请求中获取</span></span><br><span class="line">    overwrite: <span class="literal">true</span>,  <span class="comment">// 是否允许重写</span></span><br><span class="line">    secure: <span class="string">''</span>,</span><br><span class="line">    sameSite: <span class="string">''</span>,</span><br><span class="line">    signed: <span class="literal">true</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">    key: <span class="string">'SESSION_ID'</span>, <span class="comment">// 使用 SESSION_ID 来作为 redis key 的前缀</span></span><br><span class="line">    store: redisStore(),</span><br><span class="line">    cookie: cookie <span class="comment">// 设置 session id 储存的 cookie</span></span><br><span class="line">&#125;))</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">    ctx.body = <span class="string">'Hello world!'</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/get'</span>, <span class="keyword">async</span> ctx =&gt; &#123;</span><br><span class="line">    <span class="comment">// 读取和修改 session 信息</span></span><br><span class="line">    ctx.session.count = ctx.session.count + <span class="number">1</span></span><br><span class="line">    ctx.body = ctx.session;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/set'</span>, <span class="keyword">async</span> (ctx) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 设置 session</span></span><br><span class="line">    ctx.session = &#123;</span><br><span class="line">        id: <span class="built_in">Math</span>.random().toString(<span class="number">36</span>).substr(<span class="number">2</span>), <span class="comment">// 随机 id</span></span><br><span class="line">        count: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    ctx.body = ctx.session;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.use(router.routes()).use(router.allowedMethods());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 启动服务监听本地3000端口</span></span><br><span class="line">app.listen(<span class="number">3000</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'应用已经启动，http://localhost:3000'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>上面的代码中，通过 <code>require();</code> 引入了 koa 的中间件，并且在使用时传递了设置信息，通过访问 <a href="http://localhost:3000/set" target="_blank" rel="noopener">http://localhost:3000/set</a> 和 <a href="http://localhost:3000/get" target="_blank" rel="noopener">http://localhost:3000/get</a> 分别设置和获取 session。当客户端访问对应 URL 时，服务端将 session 数据进行存储，而在浏览器访问 <a href="http://localhost:3000/get" target="_blank" rel="noopener">http://localhost:3000/get</a> 将会看到 session 存储的数据：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&quot;id&quot;:&quot;7zcj87rsyd&quot;,&quot;count&quot;:1&#125;</span><br></pre></td></tr></table></figure><p>通过查看请求，可以看到中间件管理了 session id 的产生以及 cookie 的设置，它会产生唯一的 <code>SESSION_ID</code> 返回给浏览器：</p><p><img src="/2020/10/08/了解cookie和session/img/session_id_response.png" alt="session_id_response"></p><p>而在 redis 中也能够看到存储的 session 数据：</p><p><img src="/2020/10/08/了解cookie和session/img/session_data_redis.png" alt="session_data_redis"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>通过前面的介绍，我们了解到：</p><ul><li>Web 开发中引入 cookie 和 session 的原因（HTTP 的无状态）</li><li>Cookie 和 session 的区别</li><li>Cookie 包含的内容和用法</li><li>Cookie 与 session 的工作方式</li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><a href="https://www.allaboutcookies.org/cookies/" target="_blank" rel="noopener">https://www.allaboutcookies.org/cookies/</a></p><p><a href="https://www.privacypolicies.com/blog/browser-cookies-guide/" target="_blank" rel="noopener">https://www.privacypolicies.com/blog/browser-cookies-guide/</a></p><p><a href="https://stackoverflow.com/questions/31021764/where-does-chrome-store-cookies" target="_blank" rel="noopener">https://stackoverflow.com/questions/31021764/where-does-chrome-store-cookies</a></p></div><footer class="article-footer"><a data-url="http://blog.moyufed.com/2020/10/08/了解cookie和session/" data-id="ckheofrn4001qqsvyx02nq663" class="article-share-link">Share</a><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/全栈/">全栈</a></li></ul></footer></div><nav id="article-nav"><a href="/2020/11/13/写-JavaScript-组件（库）的小细节/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">写 JavaScript 组件（库）的小细节</div></a><a href="/2020/10/01/【前端开发日常-4】Windows安装Redis及简单使用/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">【前端开发日常 - 4】Windows安装Redis及简单使用</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/">Mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/全栈/">全栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/Linux/" style="font-size:10px">Linux</a> <a href="/tags/Mongodb/" style="font-size:10px">Mongodb</a> <a href="/tags/Nodejs/" style="font-size:12.5px">Nodejs</a> <a href="/tags/React/" style="font-size:15px">React</a> <a href="/tags/Webpack/" style="font-size:10px">Webpack</a> <a href="/tags/全栈/" style="font-size:17.5px">全栈</a> <a href="/tags/前端/" style="font-size:20px">前端</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/2020/11/13/写-JavaScript-组件（库）的小细节/">写 JavaScript 组件（库）的小细节</a></li><li><a href="/2020/10/08/了解cookie和session/">了解 cookie 和 session</a></li><li><a href="/2020/10/01/【前端开发日常-4】Windows安装Redis及简单使用/">【前端开发日常 - 4】Windows安装Redis及简单使用</a></li><li><a href="/2020/09/28/Koa中间件使用之koa-router/">Koa中间件使用之koa-router</a></li><li><a href="/2020/09/18/【前端开发日常-7】简单粗暴，在React中快速使用Mobx/">【前端开发日常 - 7】简单粗暴，在React中快速使用Mobx</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 摸鱼前端 | Moyufed<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br><a href="http://www.beian.miit.gov.cn" target="_blank">黔ICP备18007258号</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>
<!DOCTYPE html><html><head><meta charset="utf-8"><title>JavaScript的this关键字 | 摸鱼前端 | Moyufed</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="baidu-site-verification" content="bWMteHRHG2"><meta name="description" content="JavaScript的this关键字this 关键字指向一个对象，该对象是JavaScript当前代码执行的小块。换而言之，每个JavaScript方法执行的时候都有一个执行上下文（execution context），就是我们的 this。执行上下文体现了当前方法是如何被调用的。为了理解 this 关键字，我们首先要关注方法是何时、何处、以何种方式调用的，而不是关注方法在何处以何种方式声明。12"><meta name="keywords" content="前端"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript的this关键字"><meta property="og:url" content="http://blog.moyufed.com/2020/03/31/JavaScript的this关键字/index.html"><meta property="og:site_name" content="摸鱼前端 | Moyufed"><meta property="og:description" content="JavaScript的this关键字this 关键字指向一个对象，该对象是JavaScript当前代码执行的小块。换而言之，每个JavaScript方法执行的时候都有一个执行上下文（execution context），就是我们的 this。执行上下文体现了当前方法是如何被调用的。为了理解 this 关键字，我们首先要关注方法是何时、何处、以何种方式调用的，而不是关注方法在何处以何种方式声明。12"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2020-09-01T08:16:29.931Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="JavaScript的this关键字"><meta name="twitter:description" content="JavaScript的this关键字this 关键字指向一个对象，该对象是JavaScript当前代码执行的小块。换而言之，每个JavaScript方法执行的时候都有一个执行上下文（execution context），就是我们的 this。执行上下文体现了当前方法是如何被调用的。为了理解 this 关键字，我们首先要关注方法是何时、何处、以何种方式调用的，而不是关注方法在何处以何种方式声明。12"><link rel="alternate" href="/atom.xml" title="摸鱼前端 | Moyufed" type="application/atom+xml"><link rel="icon" href="/favicon.ico"><link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css"><link rel="stylesheet" href="/css/style.css"></head></html><body><div id="container"><div id="wrap"><header id="header"><div id="banner"></div><div id="header-outer" class="outer"><div id="header-title" class="inner"><h1 id="logo-wrap"><a href="/" id="logo">摸鱼前端 | Moyufed</a></h1><h2 id="subtitle-wrap"><a href="/" id="subtitle">分享有趣好玩的前端技术，游戏研究猿，欢迎交流，一起来摸鱼。</a></h2></div><div id="header-inner" class="inner"><nav id="main-nav"><a id="main-nav-toggle" class="nav-icon"></a> <a class="main-nav-link" href="/">Home</a> <a class="main-nav-link" href="/archives">Archives</a></nav><nav id="sub-nav"><a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a> <a id="nav-search-btn" class="nav-icon" title="搜索"></a></nav><div id="search-form-wrap"><form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.moyufed.com"></form></div></div></div></header><div class="outer"><section id="main"><article id="post-JavaScript的this关键字" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-meta"><a href="/2020/03/31/JavaScript的this关键字/" class="article-date"><time datetime="2020-03-31T06:15:14.000Z" itemprop="datePublished">2020-03-30</time></a></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">JavaScript的this关键字</h1></header><div class="article-entry" itemprop="articleBody"><h2 id="JavaScript的this关键字"><a href="#JavaScript的this关键字" class="headerlink" title="JavaScript的this关键字"></a>JavaScript的this关键字</h2><p><code>this</code> 关键字指向一个对象，该对象是JavaScript当前代码执行的小块。换而言之，每个JavaScript方法执行的时候都有一个执行上下文（execution context），就是我们的 this。执行上下文体现了当前方法是如何被调用的。</p><p>为了理解 <code>this</code> 关键字，我们首先要关注方法是何时、何处、以何种方式调用的，而不是关注方法在何处以何种方式声明。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bike</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Ninja"</span>;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">name</span>: <span class="string">"Pulsar"</span>, <span class="attr">bike</span>: bike &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">"Gixxer"</span>, <span class="attr">bike</span>: bike &#125;;</span><br><span class="line"></span><br><span class="line">bike();           <span class="comment">// "Ninja"</span></span><br><span class="line">obj1.bike();      <span class="comment">// "Pulsar"</span></span><br><span class="line">obj2.bike();      <span class="comment">// "Gixxer"</span></span><br></pre></td></tr></table></figure><p>在上面的代码中， <code>bike()</code> 方法的作用就是打印 <code>this.name</code> ，也就是说打印出当前执行上下文的 <code>name</code> 属性的值。当 <code>bike()</code> 方法被调用时，打印出 “Ninja” ，因为在没有指定的情况下，执行上下文都会指向<strong>全局对象</strong>，而在全局对象上面，我们定义了一个 <code>name</code> 的属性，值是 “Ninja”。</p><p>同样的，在 <code>obj1().bike()</code> 中打印了 “Pulsar” ，因为 <code>bike()</code> 方法是以 <code>obj1</code> 作为执行上下文来调用的， <code>this.name</code> 实际上就是 <code>obj1.name</code> 。同理 <code>obj2.bike()</code> 方法的执行上下文就是 <code>obj2</code> 。</p><h2 id="This的默认绑定和隐式绑定"><a href="#This的默认绑定和隐式绑定" class="headerlink" title="This的默认绑定和隐式绑定"></a>This的默认绑定和隐式绑定</h2><p><strong>默认绑定：</strong>如果我们的代码是在严格模式（strict mode）下， <code>this</code> 的值就是 <code>undefined</code> ，否则， <code>this</code> 指代了<strong>全局对象</strong> 。</p><p>当单独使用时，它指的是<strong>全局对象</strong> ，浏览器中的<strong>全局对象</strong>其实就是 window 对象 [<strong>object Window</strong>] ，示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">this</span>;</span><br></pre></td></tr></table></figure><p>当在一个方法中使用，this指向全局对象，示例：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意：严格模式不允许默认绑定，所以 <code>this</code> 将会是 <code>undefined</code> ：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">"use strict"</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">func</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>隐式绑定：</strong>当使用一个对象的属性调用一个方法时，该对象就成了方法的执行上下文 <code>this</code>。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj1 = &#123;</span><br><span class="line">  name: <span class="string">"Pulsar"</span>,</span><br><span class="line">  bike: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">"Gixxer"</span>, <span class="attr">bike</span>: obj1.bike &#125;;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Ninja"</span>;</span><br><span class="line"><span class="keyword">var</span> bike = obj1.bike;</span><br><span class="line"></span><br><span class="line">bike();           <span class="comment">// "Ninja"</span></span><br><span class="line">obj1.bike();      <span class="comment">// "Pulsar"</span></span><br><span class="line">obj2.bike();      <span class="comment">// "Gixxer"</span></span><br></pre></td></tr></table></figure><p>上面的代码中，直接调用 <code>bike()</code> 就是默认绑定， <code>obj1.bike()</code> 和 <code>obj2.bike()</code> 就是隐式绑定。</p><p><code>bike</code> 方法是 <code>obj1</code> 的一个属性，但是当我们执行 <code>obj2.bike()</code> 时，执行上下文是 <code>obj2</code> ，因此<code>obj2.name</code> 的值被打印出来。</p><p>所以，清楚什么时间、什么地方、以何种方式调用方法是很重要的，而方法的声明并不影响。</p><h2 id="This的显式绑定和硬绑定"><a href="#This的显式绑定和硬绑定" class="headerlink" title="This的显式绑定和硬绑定"></a>This的显式绑定和硬绑定</h2><p><strong>显式绑定：</strong>如果我们使用 <code>call</code> 和 <code>apply</code> 来调用方法，那么方法将以第一个参数来作为它的执行上下文。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bike</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Ninja"</span>;</span><br><span class="line"><span class="keyword">var</span> obj = &#123; <span class="attr">name</span>: <span class="string">"Pulsar"</span> &#125;</span><br><span class="line"></span><br><span class="line">bike();           <span class="comment">// "Ninja"</span></span><br><span class="line">bike.call(obj);   <span class="comment">// "Pulsar"</span></span><br></pre></td></tr></table></figure><p>上面的代码中，我们传递了一个对象 <code>obj</code> 作为 <code>call()</code> 的参数来调用 <code>bike</code> 方法，<code>obj</code> 就被指派到了 <code>this</code> ，输出<code>obj.name</code> 的值 “Pulsar” 。</p><p><strong>硬绑定：</strong>无论我们怎么调用方法，指定 <code>this</code> 对象始终不变。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bike = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Ninja"</span>;</span><br><span class="line"><span class="keyword">var</span> obj1 = &#123; <span class="attr">name</span>: <span class="string">"Pulsar"</span> &#125;;</span><br><span class="line"><span class="keyword">var</span> obj2 = &#123; <span class="attr">name</span>: <span class="string">"Gixxer"</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> originalBikeFun = bike;</span><br><span class="line">bike = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  originalBikeFun.call(obj1);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">bike();           <span class="comment">// "Pulsar"</span></span><br><span class="line">bike.call(obj2);  <span class="comment">// "Pulsar"</span></span><br></pre></td></tr></table></figure><p>上面的代码中使用了<code>originalBikeFun.call(obj1);</code> ，使得 <code>bike()</code> 和 <code>bike.call(obj2)</code> 都输出<code>obj1.name</code> 的值。</p><h2 id="JavaScript中的new关键字"><a href="#JavaScript中的new关键字" class="headerlink" title="JavaScript中的new关键字"></a>JavaScript中的new关键字</h2><p>任何方法之前的 <code>new</code> 关键字会调用方法的 <code>constructor</code> ，然后产生下面的结果：</p><ul><li>产生一个新的空的对象；</li><li>该新对象关联到方法的 <code>prototype</code> 属性；</li><li>该新对象被绑定为 <code>this</code> 关键字，将作为方法的执行上下文；</li><li>如果方法没有返回任何值，那将隐性的返回 this 对象。</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bike</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="string">"Ninja"</span>;</span><br><span class="line">  <span class="keyword">this</span>.maker = <span class="string">"Kawasaki"</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name + <span class="string">" "</span> + maker);  <span class="comment">// undefined Bajaj</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">"Pulsar"</span>;</span><br><span class="line"><span class="keyword">var</span> maker = <span class="string">"Bajaj"</span>;</span><br><span class="line"></span><br><span class="line">obj = <span class="keyword">new</span> bike();</span><br><span class="line"><span class="built_in">console</span>.log(obj.maker);                  <span class="comment">// "Kawasaki"</span></span><br></pre></td></tr></table></figure><p>上面的代码中，<code>bike</code> 方法前面使用了 <code>new</code> ，因此它将创建一个新对象连接到 <code>bike</code> 方法的原型链, 然后该对象绑定到 <code>this</code> 从而被返回。因此返回的 <code>this</code> 对象被分配到 <code>obj</code> 然后<code>console.log(obj.maker)</code> 打印出 “Kawasaki” 。</p><p>同样是上面的代码，方法里面的 <code>this.name</code> 没有打印出 “Ninja” 或者 “Pulsar” ，反而是 <code>undefined</code> 。因为 <code>name</code> 是在方法里面被声明，和 <code>this.name</code> 是完全不同的。同样， <code>this.maker</code> 和 <code>maker</code> 也是不同的。</p><h2 id="This绑定顺序"><a href="#This绑定顺序" class="headerlink" title="This绑定顺序"></a>This绑定顺序</h2><ul><li>首先检查方法是否用 <code>new</code> 来调用;</li><li>然后检查方法是否是被 <code>call()</code> 或者 <code>apply()</code> 方法来调用;</li><li>其次检查方法是否是通过对象上下文来调用;</li><li>默认全局对象（严格模式是 <code>undefined</code> ）。</li></ul><p>原文链接：<a href="https://codeburst.io/all-about-this-and-new-keywords-in-javascript-38039f71780c" target="_blank" rel="noopener">https://codeburst.io/all-about-this-and-new-keywords-in-javascript-38039f71780c</a></p><p>参考链接：<a href="https://segmentfault.com/a/1190000004460913" target="_blank" rel="noopener">https://segmentfault.com/a/1190000004460913</a></p></div><footer class="article-footer"><a data-url="http://blog.moyufed.com/2020/03/31/JavaScript的this关键字/" data-id="ckf55gcts00032svy6qa6118q" class="article-share-link">Share</a><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li></ul></footer></div><nav id="article-nav"><a href="/2020/04/04/【前端开发日常-18】快速配置webpack开发环境/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Newer</strong><div class="article-nav-title">【前端开发日常 - 18】快速配置webpack开发环境</div></a><a href="/2020/03/31/File-APIs（Blob-BlobURL-ArrayBuffer-FileReader）/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Older</strong><div class="article-nav-title">File APIs（Blob, BlobURL, ArrayBuffer, FileReader）</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mongodb/">Mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Nodejs/">Nodejs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/全栈/">全栈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/Linux/" style="font-size:10px">Linux</a> <a href="/tags/Mongodb/" style="font-size:10px">Mongodb</a> <a href="/tags/Nodejs/" style="font-size:16.67px">Nodejs</a> <a href="/tags/React/" style="font-size:16.67px">React</a> <a href="/tags/Webpack/" style="font-size:10px">Webpack</a> <a href="/tags/全栈/" style="font-size:13.33px">全栈</a> <a href="/tags/前端/" style="font-size:20px">前端</a></div></div><div class="widget-wrap"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul><li><a href="/2020/09/17/【前端开发日常-3】让create-react-app支持-装饰器语法/">【前端开发日常 - 3】让create-react-app支持@装饰器语法</a></li><li><a href="/2020/09/14/通过rel-preload进行内容预加载/">通过rel=preload进行内容预加载</a></li><li><a href="/2020/09/02/HTTP状态码参考/">HTTP状态码参考</a></li><li><a href="/2020/04/04/【前端开发日常-18】快速配置webpack开发环境/">【前端开发日常 - 18】快速配置webpack开发环境</a></li><li><a href="/2020/03/31/JavaScript的this关键字/">JavaScript的this关键字</a></li></ul></div></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2020 摸鱼前端 | Moyufed<br>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a><br><a href="http://www.beian.miit.gov.cn" target="_blank">黔ICP备18007258号</a></div></div></footer></div><nav id="mobile-nav"><a href="/" class="mobile-nav-link">Home</a> <a href="/archives" class="mobile-nav-link">Archives</a></nav><script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/fancybox/jquery.fancybox.css"><script src="/fancybox/jquery.fancybox.pack.js"></script><script src="/js/script.js"></script></div></body>